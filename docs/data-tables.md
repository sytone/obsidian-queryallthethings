---
nav_order: 5
layout: default
title: Data Tables
---

To make it simpler to quey data some in memory data tables have been created.

| Table Name              | Description                                                                                                                                 |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| obsidian_markdown_notes | Uses a cached collection of the markdown notes with some properties made available at the top level of the note object as columns. |
| obsidian_markdown_files | Uses in the inbuilt collection of markdown files, it calls `vault.getMarkdownFiles()` on every query to ensure the collection is up to date |
| dataview_pages          | This is same as using pages as a data source in dataview                                                                                    |
| dataview_tasks                   | This is a in memory collection of tasks based off DataView pages. Details below.                                                            |
| dataview_lists                   | This is a in memory collection of all list items including list items that contain task markdown based off DataView pages. Details Below    |

## Obsidian Markdown Notes (obsidian_markdown_notes)

%%snippet id='docs-tables-obsidian-markdown-notes' options='nocodeblock'%%

If you need to reference a property of a object do not forget to use `->` and not `.`

| Column Name | Type   | Description                                     |
| ----------- | ------ | ----------------------------------------------- |
| content        | string | Full content of the markdown note.                |
| path        | string | Full path to the markdown note.                 |
| name        | string | The name of the note including the extension.   |
| basename    | number | Just the name of the note.                      |
| extension   | number | The extension of the note. Usually `md`         |
| stat        | object | contains the time and size details of the note. |
| stat->ctime | number | Time the note was creates as a serial.          |
| stat->mtime | number | Time the note was last modified as a serial.    |
| stat->size  | number | Size of the note in bytes                       |
| links  | [LinkCache[]](#linkcache-structure) | Array of links cached by Obsidian                     |
| embeds  | [EmbedCache[]](#embedcache-structure) | Array of embeds cached by Obsidian                     |
| tags  | string[] | Array of tags cached by Obsidian                     |
| headings  | [HeadingCache[]](#headingcache-structure) | Array of headings cached by Obsidian                     |
| sections  | [SectionCache[]](#sectioncache-structure) | Array of sections cached by Obsidian                     |
| listItems  | [ListItem[]](#listcache-structure) | Array of listItems cached by Obsidian                     |
| frontmatter  | [FrontMatterCache[]](#frontmattercache-structure) | Array of frontmatter cached by Obsidian                     |
| blocks  | Record<string, BlockCache> | Array of blocks cached by Obsidian                     |

%%/snippet%%

%%snippet id='docs-tables-obsidian-markdown-notes-linkcache' options='nocodeblock'%%

### LinkCache structure

```text
{
  link: string;
  original: string;
  // if title is different than link text, in the case of [[page name|display name]]
  displayText?: string;
  position: Pos;
}

### Pos structure

```text
Pos {
  start: Loc;
  end: Loc;
}
```

### Loc structure

```text
Loc {
  line: number;
  col: number;
  offset: number;
}
```

%%/snippet%%

%%snippet id='docs-tables-obsidian-markdown-notes-embedcache' options='nocodeblock'%%

### EmbedCache structure

```text
{
  link: string;
  original: string;
  // if title is different than link text, in the case of [[page name|display name]]
  displayText?: string;
  position: Pos;
}
```

%%/snippet%%

%%snippet id='docs-tables-obsidian-markdown-notes-headingcache' options='nocodeblock'%%

### HeadingCache structure

```text
{
  heading: string;
  level: number;
  position: Pos;
}
```

%%/snippet%%

%%snippet id='docs-tables-obsidian-markdown-notes-sectioncache' options='nocodeblock'%%

### SectionCache structure

```text
{
  // The block ID of this section, if defined.
  id?: string | undefined;
  //The type string generated by the parser.
  type: string;
  position: Pos;
}
```

%%/snippet%%

%%snippet id='docs-tables-obsidian-markdown-notes-listitem' options='nocodeblock'%%

### ListItem structure

```text
{
    parent: number;
    task: string;
    checked: boolean;
    line: string;
}
```

%%/snippet%%

%%snippet id='docs-tables-obsidian-markdown-notes-frontmattercache' options='nocodeblock'%%

### FrontMatterCache structure

```text
{
  [key: string]: any;
  position: Pos;
}
```

%%/snippet%%

## Obsidian Markdown Files (obsidian_markdown_files)

%%snippet id='obsidian-markdown-files-table-snippet' options='nocodeblock'%%

If you need to reference a property of a object do not forget to use `->` and not `.`

| Column Name | Type   | Description                                     |
| ----------- | ------ | ----------------------------------------------- |
| path        | string | Full path to the markdown file.                 |
| name        | string | The name of the file including the extension.   |
| basename    | number | Just the name of the file.                      |
| extension   | number | The extension of the file. Usually `md`         |
| stat        | object | contains the time and size details of the file. |
| stat->ctime | number | Time the file was creates as a serial.          |
| stat->mtime | number | Time the file was last modified as a serial.    |
| stat->size  | number | Size of the file in bytes                       |

%%/snippet%%

## Dataview Pages (dataview_pages)

This is similar to calling the dv.pages() function in Dataview. Each pages that is returned by this table has the fields as top level properties. So if you have `myfield:: fred` on the page then there will be a colum called myfield available for you to query against. Also at the top level you have tags and aliases. To get to the file details you need to drop into the `file` object. So to access the file path property you use file->path.

The JSON blob below is an example representation of what each page/row in the data set looks like and what you can use to query against in the SQL query. The markdown content this is derived from is also below.

```markdown
---
created: 2023-07-30T16:47:59-07:00
modified: 2023-07-30T16:47:59-07:00
aliases:
tags: inbox
---

DataviewFieldString:: What is the meaning of life?
DataviewFieldNumber:: 42
DataviewFieldBoolean:: true
DataviewFieldDate:: 2023-08-02

Outlink: [[Dashboard|Home]]

- List Item One
- List Item Two

- [ ] Task Item one
- [x] Task Item two
```

```text
{
    "file": {
      "path": "0 Inbox/Dataview Example.md",
      "folder": "0 Inbox",
      "name": "Dataview Example",
      "link": {
        "path": "0 Inbox/Dataview Example.md",
        "embed": false,
        "type": "file"
      },
      "outlinks": {
        "values": [
          {
            "path": "Dashboard.md",
            "type": "file",
            "display": "Home",
            "embed": false
          }
        ],
        "length": 1
      },
      "inlinks": {
        "values": [
          {
            "path": "Dashboard.md",
            "embed": false,
            "type": "file"
          }
        ],
        "length": 1
      },
      "etags": {
        "values": [
          "#inbox"
        ],
        "length": 1
      },
      "tags": {
        "values": [
          "#inbox"
        ],
        "length": 1
      },
      "aliases": {
        "values": [],
        "length": 0
      },
      "lists": {
        "values": [
          {
            "symbol": "-",
            "link": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "section": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "text": "List Item One",
            "tags": [],
            "line": 14,
            "lineCount": 1,
            "list": 14,
            "outlinks": [],
            "path": "0 Inbox/Dataview Example.md",
            "children": [],
            "task": false,
            "annotated": false,
            "position": {
              "start": {
                "line": 14,
                "col": 0,
                "offset": 266
              },
              "end": {
                "line": 14,
                "col": 15,
                "offset": 281
              }
            },
            "subtasks": [],
            "real": false,
            "header": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            }
          },
          {
            "symbol": "-",
            "link": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "section": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "text": "List Item Two\n",
            "tags": [],
            "line": 15,
            "lineCount": 2,
            "list": 14,
            "outlinks": [],
            "path": "0 Inbox/Dataview Example.md",
            "children": [],
            "task": false,
            "annotated": false,
            "position": {
              "start": {
                "line": 15,
                "col": 0,
                "offset": 282
              },
              "end": {
                "line": 16,
                "col": 0,
                "offset": 298
              }
            },
            "subtasks": [],
            "real": false,
            "header": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            }
          },
          {
            "symbol": "-",
            "link": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "section": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "text": "Task Item one",
            "tags": [],
            "line": 17,
            "lineCount": 1,
            "list": 14,
            "outlinks": [],
            "path": "0 Inbox/Dataview Example.md",
            "children": [],
            "task": true,
            "annotated": false,
            "position": {
              "start": {
                "line": 17,
                "col": 0,
                "offset": 299
              },
              "end": {
                "line": 17,
                "col": 19,
                "offset": 318
              }
            },
            "subtasks": [],
            "real": true,
            "header": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "status": " ",
            "checked": false,
            "completed": false,
            "fullyCompleted": false
          },
          {
            "symbol": "-",
            "link": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "section": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "text": "Task Item two",
            "tags": [],
            "line": 18,
            "lineCount": 1,
            "list": 14,
            "outlinks": [],
            "path": "0 Inbox/Dataview Example.md",
            "children": [],
            "task": true,
            "annotated": false,
            "position": {
              "start": {
                "line": 18,
                "col": 0,
                "offset": 319
              },
              "end": {
                "line": 18,
                "col": 19,
                "offset": 338
              }
            },
            "subtasks": [],
            "real": true,
            "header": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "status": "x",
            "checked": true,
            "completed": true,
            "fullyCompleted": true
          }
        ],
        "length": 4
      },
      "tasks": {
        "values": [
          {
            "symbol": "-",
            "link": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "section": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "text": "Task Item one",
            "tags": [],
            "line": 17,
            "lineCount": 1,
            "list": 14,
            "outlinks": [],
            "path": "0 Inbox/Dataview Example.md",
            "children": [],
            "task": true,
            "annotated": false,
            "position": {
              "start": {
                "line": 17,
                "col": 0,
                "offset": 299
              },
              "end": {
                "line": 17,
                "col": 19,
                "offset": 318
              }
            },
            "subtasks": [],
            "real": true,
            "header": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "status": " ",
            "checked": false,
            "completed": false,
            "fullyCompleted": false
          },
          {
            "symbol": "-",
            "link": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "section": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "text": "Task Item two",
            "tags": [],
            "line": 18,
            "lineCount": 1,
            "list": 14,
            "outlinks": [],
            "path": "0 Inbox/Dataview Example.md",
            "children": [],
            "task": true,
            "annotated": false,
            "position": {
              "start": {
                "line": 18,
                "col": 0,
                "offset": 319
              },
              "end": {
                "line": 18,
                "col": 19,
                "offset": 338
              }
            },
            "subtasks": [],
            "real": true,
            "header": {
              "path": "0 Inbox/Dataview Example.md",
              "type": "file",
              "embed": false
            },
            "status": "x",
            "checked": true,
            "completed": true,
            "fullyCompleted": true
          }
        ],
        "length": 2
      },
      "ctime": "2023-08-02T08:00:02.352-07:00",
      "cday": "2023-08-02T00:00:00.000-07:00",
      "mtime": "2023-08-02T08:02:51.957-07:00",
      "mday": "2023-08-02T00:00:00.000-07:00",
      "size": 595,
      "starred": false,
      "frontmatter": {
        "created": "2023-07-30T16:47:59-07:00",
        "modified": "2023-07-30T16:47:59-07:00",
        "aliases": null,
        "tags": "inbox"
      },
      "ext": "md"
    },
    "created": "2023-07-30T16:47:59.000-07:00",
    "modified": "2023-07-30T16:47:59.000-07:00",
    "aliases": null,
    "tags": "inbox",
    "DataviewFieldString": "What is the meaning of life?",
    "DataviewFieldNumber": 42,
    "DataviewFieldBoolean": true,
    "DataviewFieldDate": "2023-08-02T00:00:00.000-07:00",
    "dataviewfieldstring": "What is the meaning of life?",
    "dataviewfieldnumber": 42,
    "dataviewfieldboolean": true,
    "dataviewfielddate": "2023-08-02T00:00:00.000-07:00"
  }

```

## Dataview Tasks (dataview_tasks)

%%snippet id='tasks-table-snippet' options='nocodeblock'%%

If a property is not found in the task body it will be set to undefined. This table
is backed by dataview and will be refreshed when dataview is refreshed.

| Column Name    | Type         | Description                                                                                             |
| -------------- | ------------ | ------------------------------------------------------------------------------------------------------- |
| page           | string       | The full path including the page name and extension                                                     |
| task           | string       | The full text of the task, any tags or dates are still in this. This may be multiple lines of markdown. |
| status         | string       | The text in between the brackets of the '[ ]' task indicator ('[X]' would yield 'X', for example.)      |
| line           | number       | The line that this list item starts on in the file.                                                     |
| tags           | string array | Array of tags                                                                                           |
| tagsNormalized | string array | Array of tags all in lowercase                                                                          |
| dueDate        | string       | Due date of the task as string.                                                                         |
| doneDate       | string       | Done date of the task as string.                                                                        |
| startDate      | string       | Start date of the task as string.                                                                       |
| createDate     | string       | Create date of the task as string.                                                                      |
| scheduledDate  | string       | Schedule date of the task as string.                                                                    |
| priority       | number       | Priority of the task with 1 as highest and 3 as lowest                                                  |

%%/snippet%%

## Dataview Lists (dataview_lists)

%%snippet id='lists-table-snippet' options='nocodeblock'%%

If a property is not found in the task body it will be set to undefined. This table
is backed by dataview and will be refreshed when dataview is refreshed.

| Column Name | Type         | Description |
| ----------- | ------------ | ----------- |
| symbol      | string       |             |
| path        | string       |             |
| pageName    | string       |             |
| text        | number       |             |
| line        | string array |             |
| fields      | string array |             |
| lineCount   | string       |             |
| list        | string       |             |
| section     | string       |             |
| links       | string       |             |
| children    | string       |             |
| parent      | number       |             |

%%/snippet%%

## Reference Calendar Table (qatt.ReferenceCalendar)

The reference calendar is used to help with date based management, you can directly query the table or use it to join to other data sources.

%%snippet id='reference-calendar-table-snippet' options='nocodeblock'%%

| Column Name      | Type    | Description                                                               |
| ---------------- | ------- | ------------------------------------------------------------------------- |
| date             | string  | date.toISODate()                                                          |
| day              | number  | date.day                                                                  |
| month            | number  | date.month                                                                |
| year             | number  | date.year                                                                 |
| dayOfWeek        | number  | date.weekday                                                              |
| dayOfYear        | number  | date.ordinal                                                              |
| weekOfYear       | number  | date.weekNumber                                                           |
| weekOfMonth      | number  | date.weekNumber - DateTime.local(date.year, date.month, 1).weekNumber + 1 |
| quarter          | number  | Math.ceil(date.month / 3)                                                 |
| isLeapYear       | boolean | date.isInLeapYear                                                         |
| isToday          | boolean | date.hasSame(DateTime.now(), 'day')                                       |
| isWeekend        | boolean | date.weekday > 5                                                          |
| isFuture         | boolean | date > DateTime.now()                                                     |
| isPast           | boolean | date < DateTime.now()                                                     |
| isCurrentMonth   | boolean | date.month === DateTime.now().month                                       |
| isCurrentYear    | boolean | date.year === DateTime.now().year                                         |
| isCurrentQuarter | boolean | Math.ceil(date.month / 3) === Math.ceil(DateTime.now().month / 3)         |
| isCurrentWeek    | boolean | date.weekNumber === DateTime.now().weekNumber                             |
| isCurrentDay     | boolean | date.hasSame(DateTime.now(), 'day')                                       |

%%/snippet%%
